<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/styleIndex.css"/>
    <link rel="stylesheet" href="styles/companiesStyle.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@600&display=swap" rel="stylesheet">
    <title>Formulario de empresas</title>
    
</head>
<header>
    <nav id="menu">
        <button id="home"><a id="homeA" href="index.html">Inicio</a></button>
        <a href="index.html"><img id="github" src="assets/icons8-github.svg"></img></a>
        <a href="index.html"><img id="linkedin" src="assets/icons8-linkedin.svg"></img></a>
        <a href="index.html"><img id="telegram" src="https://img.icons8.com/ios/50/000000/telegram-app.png"></img></a>
        <input type="search" id="pesquisar" placeholder="Pesquisar por CNPJ">
        <button id="searchBt" type="submit">
            <img id="search"src="https://img.icons8.com/ios/50/000000/search--v1.png"/>
        </button>         
        <button id="btCadastros" onclick="allCompanies()"><a>Cadastros</a></button>
    </nav>    
</header>
<body>
    <div id="bod">
        <h1 id="iu">Os registros aparecerão aqui</h1>
        <div id="company">
            <div id="geral">
            <div id="dir">
            <table id="tabela">
                <caption>Nome da Empresa</caption>
                
                <tr><td class="ce">Tela</td><td class="cd">Resolução </td></tr>
                <tr><td class="ce">CNPJ</td><td class="cd">5MP para fotos</td></tr>
                <tr><td class="ce">Inscrição Estadual</td><td class="cd">000/000/00</td></tr>
                <tr><td class="ce">Inscrição Municipal</td><td class="cd">Wi-Fi</td></tr>
                <tr><td class="ce">Bluetooth</td><td class="cd">12GB</td></tr>
                <tr><td class="ce">Memória Interna</td> <td class="cd">12GB</td></tr>
                </table>
            </div>
            <div id="esq">
                <table id="tabela">
                    <caption>Nome da Empresa</caption>
                    
                    <tr><td class="ce">Tela</td><td class="cd">Resolução </td></tr>
                    <tr><td class="ce">CNPJ</td><td class="cd">5MP para fotos</td></tr>
                    <tr><td class="ce">Inscrição Estadual</td><td class="cd">000/000/00</td></tr>
                    <tr><td class="ce">Inscrição Municipal</td><td class="cd">Wi-Fi</td></tr>
                    <tr><td class="ce">Bluetooth</td><td class="cd">12GB</td></tr>
                    <tr><td class="ce">Memória Interna</td> <td class="cd">12GB</td></tr>
                    </table>
                </div>
            </div>           
        </div>    
    </div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
<script src="validations/validateCnpj.js"></script>

<script>
    const allCompanies = async () => {   
    try {        
        const resul = await fetch('http://localhost:8080/home/company-inf');
        const data = await resul.json();       
        show(data);
    } catch (err) {
            console.log('Deu Ruim: ' + err);
        }
    }
    const div = document.getElementById('company');
    const show = (dt) => {        
        console.log(dt);
        dt.map(function(author) {
        let p = createNode('p');
        let p1 = createNode('p');
        let img = createNode('img');
        let span = createNode('span');        
        p.innerHTML = `Nome: ${author.name}`;
        p1.innerHTML = `CNPJ: ${author.companies_information.cnpj}`;       
        append(div, p);
        append(div, p1);
    })

    }

    // Teste de dinamismo

function createNode(element) {
    return document.createElement(element);
}

function append(parent, el) {
  return parent.appendChild(el);
}
</script>